environment: prod
levels:
  - level: level0
    type: platform
    stacks:
    - stack: launchpad
      landingZoneRepoUri: daves2-gitlab-server.eastus2.cloudapp.azure.com:reference_app_caf/caf_modules_public.git
      landingZonePath: ${CI_PROJECT_DIR}/caf_modules_public/landingzones/caf_launchpad/
      configurationRepoUri: daves2-gitlab-server.eastus2.cloudapp.azure.com:reference_app_caf/base_config.git
      configurationPath: ${CI_PROJECT_DIR}/base_config/level0/
    launchpad: true

  - level: level1
    type: platform
    stacks:
    - stack: foundations
      landingZoneRepoUri: daves2-gitlab-server.eastus2.cloudapp.azure.com:reference_app_caf/caf_modules_public.git
      landingZonePath: ${CI_PROJECT_DIR}/caf_modules_public/landingzones/caf_foundations/
      configurationRepoUri: daves2-gitlab-server.eastus2.cloudapp.azure.com:reference_app_caf/base_config.git
      configurationPath: ${CI_PROJECT_DIR}/base_config/level1
      tfState: foundations.tfstate
  
  - level: level2
    stacks:
    - stack: networking_hub
      landingZoneRepoUri: daves2-gitlab-server.eastus2.cloudapp.azure.com:reference_app_caf/caf_modules_public.git
      landingZonePath: ${CI_PROJECT_DIR}/caf_modules_public/landingzones/caf_networking/
      configurationRepoUri: daves2-gitlab-server.eastus2.cloudapp.azure.com:reference_app_caf/base_config.git
      configurationPath: ${CI_PROJECT_DIR}/base_config/level2/networking/hub/
      tfState: networking_hub.tfstate
      
    - stack: shared_services
      landingZoneRepoUri: daves2-gitlab-server.eastus2.cloudapp.azure.com:reference_app_caf/caf_modules_public.git
      landingZonePath: ${CI_PROJECT_DIR}/caf_modules_public/landingzones/caf_shared_services/
      configurationRepoUri: daves2-gitlab-server.eastus2.cloudapp.azure.com:reference_app_caf/base_config.git
      configurationPath: ${CI_PROJECT_DIR}/base_config/level2/shared_services/
      tfState: caf_shared_services.tfstate
